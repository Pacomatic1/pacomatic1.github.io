<!doctype html>
<html lang="en">
    <head>
        <script src="../../../shared.js" type=module></script>
        <style>
            @import url('../style.css');
        </style>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Paco's Ramblings</title>

    </head>
    <body class="has-scrollbar">
        <div id="contentContainer">
            <div id="headerPiece">
                <div id="titlePiece">
                    This is the title of my thing.
                    <!-- This is to be replaced by the compiler, so this should never appear anywhere else. This is the title. -->
                </div>
                <hr>
                <div id="detailsPiece">
                    NODEJS-UNIQUENESS-5328746329847021
                </div>
            </div>
            <div>
                <div id="articleContainer">
                    <div class="paragraph">
<p>Here is some text.
more text.</p>
</div>
<div class="paragraph">
<p>Now for some
hard-line-broken
text. Soo good, right?</p>
</div>
<div class="paragraph">
<p>Now another paragraph.
The thing should no longer apply.
So peak.</p>
</div>
<hr>
<div class="paragraph">
<p>AUGH!
What was that!</p>
</div>
<div class="sect1">
<h2 id="_subheading">Subheading..?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is some more stuff.</p>
</div>
</div>
</div>
                    <!-- This is to be replaced by the compiler, so this should never appear anywhere else. This is the article. -->
                </div>
            </div>
        </div>
    </body>

    <script>
    // We will move this to the compiler soon.
    // Soon. Not yet.

    // Note for later: JSDOM is a helpful-looking library. Might make my post-processing shenanigans less painful.

    // Make all images load using async.
    var imageTags = document.querySelectorAll('img');
    for (let i = 0; i < imageTags.length; i++) {
        var tagToMod = imageTags[i]; 
        // They only load when they're on-screen, and they don't lag you when they decode (since there's a million of 'em)
        tagToMod.loading = "lazy";
        tagToMod.decoding = "async";
    }

    var linkTags = document.querySelectorAll('a');
    for (let i = 0; i < linkTags.length; i++) {
        var tagToMod = linkTags[i]; 

        // If the content of the tag starts with an exclamation point (!), remove it and make the link open in a new tab. 
        if (tagToMod.innerHTML.startsWith('!')) {
            tagToMod.target = "_blank";
            tagToMod.innerHTML = tagToMod.innerHTML.slice(1);
        } else {
            tagToMod.target = '_top';
        }
    }
    </script>
</html>