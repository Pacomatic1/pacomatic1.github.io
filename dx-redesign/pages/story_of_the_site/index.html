<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Story of Undertale</title>
        <script src="../shared.js"></script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap');
            @import url('7_scrollbar.css');

            :root {
                --default-text-color: #222;
                --default-font: 9pt "Noto Sans", sans-serif;
                --default-bg-color: #fafafa;
            }

            body {
                margin:0; 
                padding:0; 
                background-color:  var(--default-bg-color);
            }

            .tinymargin {
                margin: .1rem;
            }
            .bigTextButNotAHeader {
                font-size: 1.1rem;
            }
            

            #mdContainer {
                max-width: 70em;
                margin-inline: auto;
                font: var(--default-font);
                color: var(--default-text-color);
                padding: .3rem;
            }

            #mdContainer h2 {
                font-size: 1.5rem;
                margin-top: 0.1rem;
                margin-bottom: .1rem;
            }
            #mdContainer h6 {
                font-size: .5rem;
                margin-top: 0px;
                margin-bottom: 0;
            }


            #mdContainer img {
                max-width: 100%;
            }
        </style>



    </head>
    <body class="has-scrollbar">
        <audio src="./assets/mario_is_missing_snes-united_states.flac" autoplay loop></audio>
        <div id="mdContainer"></div>
        <!-- Everything here is rendered with markdown. I wanna use markdown in my blog, so this is like a really scuffed precursor. -->






        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script>
            const mdContainer = document.getElementById("mdContainer");
            var mdTempContainer = document.createElement("div");
            marked.use({
                breaks: true,
            });

            // Usage:
            // The defaults of marked, with a few differences.
            //      If a link has an exclamation mark appened to it, it will open in a new tab.
            //      If you want an image to have width and height, append "#size-width-height" to the source URL, with width and height being CSS properties. auto is compatible, and it's always both or none so remember to use auto.
            //      If you want an image to have a slight margin, append "#tinymargin" to the source URL.

            var theArticle = `## Preamble
Many websites nowadays are built thanks to the **web revival** movement; all us netizens are tired of social media and the big corporations and we're bringing back our own sites and all that.
While I am involved in this movement, my website was never meant for this. Not originally.

## Chapter 1: Rayman ~~Origins~~ Legends
I like video games. This is no secret. Ever since I was a kid, I've wanted to make video games. This is no secret. <br>
Lucky for me, my *papa* was a programmer! I don't remember how this happened, but my papa roped me into making a website by giving me some *personal, hand-made* HTML classes.

Mind you, these classes weren't much: Just basic HTML and some CSS. Still, it was enough to do *something* with, and that's how I made my site, hosted on dboys.ca. Although dboys is defunct and I've redesigned my site multiple times since, you can still find it on the Old Site Archive. 
###### (TODO: ADD LINK TO THE ARCHIVE ONCE YOU... you know... make the archive)
As you can see (eventually once I make the archive ðŸ’€), it sucked. Everything was as static as can be, and the background was horrible! I couldn't do a gradient, so I did these funky block things, and the background looked terrible whenever you did anything that wasn't 16:9! Worse yet, *I knew about this.* I didn't know how to fix it though, so I just left it as-is. [I used this exact background on the old site.](./assets/original_site_bg_unmodified.avif!) Funny enough, [I put my old site on the Internet Archive back in the day](https://web.archive.org/web/20210923011913/http://dboys.ca/index.html!); if I never did this, this old design would've been lost to time. Thanks, me from 2021! <sub>I expected that to be *way* farther in the past.</sub>

As time went on, I took what I had and expanded it: More pages, more links to other platforms. However, the comically bad programming and my inability to expand it because I was using stylesheets and scripts that broke certain stuff meant that I had to do something drastic: Start anew.

## Chapter 2: Everything and nothing changed at the same time
Thanks to the new stuff I made, I gained more experience than ever before in HTML and CSS. I also used a smidgeon of Javascript that I stole off some website for the search bar. Although I found the site somewhat difficult to make, I didn't mind that. What I really hated was something completely different:

Navigation bars.

I wanted a piece of my site that would stay on-screen no matter where you went. Sadly, I didn't know how to do this. It was for this reason that my website ended up turning into the exact same thing as the last: A linktree. Don't get me wrong, it was a good looking one, but a linktree is a linktree. There's no getting around it. After I made this version of the site, I planned to make a ton more projects to fill up that searchbar area. I never did. Even so, I was content, and moved on to do other things, only ever updating it to add new social media links.

PS: If I'm not wrong, I think I wanted a navigation bar on the original site, too. Since I couldn't do it back then either, I added "Go to Sitemap" links on all of the subpages so that you could navigate back to the sitepad with minimal hassle.

## Chapter 3: I was struck by a truck, and that was a good thing
For a long, indeterminate period of time between 2021 and April 2025, almost nothing changed. The website had new links added for social media and whatnot, and dboys.ca expired so I moved to GitHub Pages, but that was it. Eventually, I found out about the web revival movement, and what people were doing on Neocities. For a while, I found it cool but otherwise didn't care. But one day, I went on my site. Then I went on their sites. Then I went on my site. Then I went on their sites.

Oh my goodness, my site *sucks!* It's so boring, it could be replaced by a linktree! It's so... it's so....
<span class="bigTextButNotAHeader">**corporate.**</span>

After deliberating for 2 days, I decided to re-build my website.

## Chapter 4: Doom came in the form of a Melon
Now here's a funny thing: In the time between then and now, I started learning more about programming. I owe a lot of that to [Dreams](https://en.wikipedia.org/wiki/Dreams_(video_game)!) and [LittleBigPlanet 3](https://en.wikipedia.org/wiki/LittleBigPlanet_3!)'s logic system combined with [SmileBASIC 2](https://en.wikipedia.org/wiki/Petit_Computer!) and [Godot 3](https://en.wikipedia.org/wiki/Godot_(game_engine)!). In that time, I also learned a lot of C# and some C++.
All in all, I new more. A lot more than I did before. My extra knowledge played a huge part in how the new site worked, because I stopped relying entirely on HTML and CSS and started to embrace Javascript with open arms. As I learned more and more about web development, I had a genius idea: "What if I had everything on a single HTML page, and then loaded whatever you need using [iframes](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/iframe!) and [query strings](https://en.wikipedia.org/wiki/Query_string!)?"
I had conceptualized a whole new idea: [Something that already exists](https://en.wikipedia.org/wiki/Single-page_application!). That's right: I conceptualized the iframe-based single-page application, something that existed long before I was born.

This solved all of my problems: I got to have a website with multiple pages, and I got to have a piece of it that stayed around no matter where I went! Plus, I could even use a global stylesheet and global script to make sure that all of them had a consistent style!
As for what I was to do, I based it off of 3 things: [medjed.nekoweb.org](./assets/medjed.png!), [PrismLauncher](./assets/prismlauncher.png!), and [7.css](https://khang-nd.github.io/7.css/!).
I built a simple query string system, using a lookup table to get the page you're on and choose a specific iframe as well as a background for this. I did styling by modifying *the compiled version* of 7.css for, only for me to realize that it was a huge waste of time since I wouldn't use half of its UI elements anyways. I instead made my own stylesheet and then only made some stuff for whatever I needed, with PrismLauncher as reference (it uses Qt so I took screenshots and manually picked colors and styling) and 7.css to *'borrow'* code from. I then injected this stylesheet into all my pages using a script that all of them shared. I also got the iframes to have variable height thanks to the [iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer) library. The result?
![The scrapped second redesign's home page. It's clearly unfinished.](./assets/ogredesign_homepage.png#size-48%-auto#tinymargin)![The scrapped second redesign's theme test page. It looks like a debug menu, because it basically is.](./assets/ogredesign_themetest.png#size-48%-auto#inline#tinymargin)
Two pages. Why, you may ask? Well, after making these I decided to keep looking online for more inspiration to use on my site. 
<span class="bigTextButNotAHeader">**Then I found the melon.**</span> 
            `;

            // Pre-processor (before marked does anything)
            var preprocessedArticle = theArticle;
            

            var parsedText = marked.parse(preprocessedArticle);
            // Post-post-processor (after marked does stuff, but while it's still a string) (marked already has its own post-processor) 



            mdTempContainer.innerHTML = parsedText;
            // Post-Injection processor (post-post-post processor) (after the thing turns to HTML but before it's actually added to the DOM)
            var anchorTags = mdTempContainer.querySelectorAll('a');
            for (let i = 0; i < anchorTags.length; i++) {
                var tagToMod = anchorTags[i]; 
                
                if (tagToMod.href.endsWith("!")) {
                    tagToMod.target = "_blank";
                    tagToMod.href = tagToMod.href.substring(0, tagToMod.href.length - 1);
                }
            }
            
            // Look through image tags to go handle attributes
            var imageTags = mdTempContainer.querySelectorAll('img');
            for (let i = 0; i < imageTags.length; i++) {
                var tagToMod = imageTags[i]; 
                // Putting tagToMod.src in a variable makes it act really weird. No clue as to why that happens, but for that reason I'm referencing it directly even though I shouldn't be doing that.

                // Lazy loading
                tagToMod.loading = "lazy";
                tagToMod.decoding = "async";

                // For some ungodly reason, I can't stringify tagSource and I can't use it here. This is a workaround, and it's a very bad one. If posible, fix this.
                if (tagToMod.src.includes("#")) { // Use hashes for properties. Start by making an array of hashes.
                    var tagToModHashes = extractHashesFromUrl(tagToMod.src)[1];
                    individualHashes = tagToModHashes.split("#"); // [0] is always empty. Don't know why but it's probably better not to remove it.

                    individualHashes.forEach(element => {
                        if (element.includes("size-")) { // width and height
                            var properties = element.split("-"); // "size", width, height.
                            tagToMod.style.setProperty("width", properties[1])
                            tagToMod.style.setProperty("height", properties[2])
                        }
                        if (element.includes("tinymargin")) {
                            addClassToElement("tinymargin", tagToMod);
                        }
                    });   
                }
            }


            mdContainer.innerHTML = mdTempContainer.innerHTML;

            function addClassToElement(classToAdd, elementToModify) {
                var classList = elementToModify.getAttribute("class");
                if (classList == null) {classList = ""}
                classList = classList + classToAdd;
                elementToModify.setAttribute("class", classList);
            }

            function extractHashesFromUrl(urlToUse) { // Returns an array containing the string without the hashes and the hashes on their own. Includes the leading hashtag. 
                return seperateStringInTwoBasedOnFirstAppearanceOfOtherString(urlToUse, "#");
            }

            function seperateStringInTwoBasedOnFirstAppearanceOfOtherString(stringToSeparate, stringToFind) { // Returns an array containing 2 items, being both parts of the string. This is inclusive(?), so the second string includes the string you were trying to find. 
                var SecondPartOfString = stringToSeparate.slice( stringToSeparate.indexOf(stringToFind) );
                var firstPartOfString = stringToSeparate.substring(0, stringToSeparate.indexOf(stringToFind));
                return [firstPartOfString, SecondPartOfString];
            }

        </script>
    </body>
</html>